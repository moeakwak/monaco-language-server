This is a copy from https://github.com/davschul/python-lsp-jsonrpc/tree/async.